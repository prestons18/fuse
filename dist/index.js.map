{
  "version": 3,
  "sources": ["../src/fuse/reactivity.ts", "../src/fuse/dom.ts", "../src/index.tsx"],
  "sourcesContent": ["let currentEffect: (() => void) | null = null; \n\nexport function effect(fn: () => void) {\n    const run = () => {\n        currentEffect = run;\n        fn();\n        currentEffect = null;\n    }\n    run();\n}\n\nexport function signal<T>(value: T) {\n    const subscribers = new Set<() => void>();\n\n    return {\n        get() {\n            if (currentEffect) subscribers.add(currentEffect);\n            return value;\n        },\n        set(v: T) {\n            value = v;\n            subscribers.forEach((fn) => fn());\n        }\n    }\n}", "import { effect } from \"./reactivity\";\n\nexport function h(type: any, props: any, ...children: any[]) {\n  if (typeof type === \"function\") return type({ ...props, children });\n  \n  const el = document.createElement(type);\n  \n  for (const k in props) {\n    const v = props[k];\n    if (k.startsWith(\"on\")) el.addEventListener(k.slice(2).toLowerCase(), v);\n    else if (typeof v === \"function\") effect(() => (el[k] = v()));\n    else el[k] = v;\n  }\n  \n  const mount = (parent: HTMLElement, child: any): any => {\n    if (Array.isArray(child)) return child.forEach((c) => mount(parent, c));\n    if (typeof child === \"function\") {\n      const t = parent.appendChild(document.createTextNode(\"\"));\n      return effect(() => (t.textContent = child()));\n    }\n    parent.appendChild(typeof child === \"object\" ? child : document.createTextNode(child));\n  };\n  \n  children.flat().forEach((c) => mount(el, c));\n  return el;\n}\n\nexport function render(vnode: any, container: HTMLElement) {\n  container.replaceChildren(vnode);\n}", "/** @jsx h */\nimport { h, render } from \"./fuse/dom\";\nimport { signal } from \"./fuse/reactivity\";\n\nfunction Counter() {\n    const count = signal(0);\n    return (\n        <div>\n            <h1>Count: {() => count.get()}</h1>\n            <button onClick={() => count.set(count.get() + 1)}>Increment</button>\n        </div>\n    )\n}\n\nrender(<Counter />, document.body);"],
  "mappings": ";AAAA,IAAI,gBAAqC;AAElC,SAAS,OAAO,IAAgB;AACnC,QAAM,MAAM,MAAM;AACd,oBAAgB;AAChB,OAAG;AACH,oBAAgB;AAAA,EACpB;AACA,MAAI;AACR;AAEO,SAAS,OAAU,OAAU;AAChC,QAAM,cAAc,oBAAI,IAAgB;AAExC,SAAO;AAAA,IACH,MAAM;AACF,UAAI,cAAe,aAAY,IAAI,aAAa;AAChD,aAAO;AAAA,IACX;AAAA,IACA,IAAI,GAAM;AACN,cAAQ;AACR,kBAAY,QAAQ,CAAC,OAAO,GAAG,CAAC;AAAA,IACpC;AAAA,EACJ;AACJ;;;ACtBO,SAAS,EAAE,MAAW,UAAe,UAAiB;AAC3D,MAAI,OAAO,SAAS,WAAY,QAAO,KAAK,EAAE,GAAG,OAAO,SAAS,CAAC;AAElE,QAAM,KAAK,SAAS,cAAc,IAAI;AAEtC,aAAW,KAAK,OAAO;AACrB,UAAM,IAAI,MAAM,CAAC;AACjB,QAAI,EAAE,WAAW,IAAI,EAAG,IAAG,iBAAiB,EAAE,MAAM,CAAC,EAAE,YAAY,GAAG,CAAC;AAAA,aAC9D,OAAO,MAAM,WAAY,QAAO,MAAO,GAAG,CAAC,IAAI,EAAE,CAAE;AAAA,QACvD,IAAG,CAAC,IAAI;AAAA,EACf;AAEA,QAAM,QAAQ,CAAC,QAAqB,UAAoB;AACtD,QAAI,MAAM,QAAQ,KAAK,EAAG,QAAO,MAAM,QAAQ,CAAC,MAAM,MAAM,QAAQ,CAAC,CAAC;AACtE,QAAI,OAAO,UAAU,YAAY;AAC/B,YAAM,IAAI,OAAO,YAAY,SAAS,eAAe,EAAE,CAAC;AACxD,aAAO,OAAO,MAAO,EAAE,cAAc,MAAM,CAAE;AAAA,IAC/C;AACA,WAAO,YAAY,OAAO,UAAU,WAAW,QAAQ,SAAS,eAAe,KAAK,CAAC;AAAA,EACvF;AAEA,WAAS,KAAK,EAAE,QAAQ,CAAC,MAAM,MAAM,IAAI,CAAC,CAAC;AAC3C,SAAO;AACT;AAEO,SAAS,OAAO,OAAY,WAAwB;AACzD,YAAU,gBAAgB,KAAK;AACjC;;;ACzBA,SAAS,UAAU;AACf,QAAM,QAAQ,OAAO,CAAC;AACtB,SACI,kBAAC,aACG,kBAAC,YAAG,WAAQ,MAAM,MAAM,IAAI,CAAE,GAC9B,kBAAC,YAAO,SAAS,MAAM,MAAM,IAAI,MAAM,IAAI,IAAI,CAAC,KAAG,WAAS,CAChE;AAER;AAEA,OAAO,kBAAC,aAAQ,GAAI,SAAS,IAAI;",
  "names": []
}
